<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This workshop is going to take you through the best-in-class observability solution for ingesting, monitoring, visualizing and analyzing data"><meta name=author content="Sales Engineering"><link href=https://signalfx.github.io/observability-workshop/smartagent/prep/ rel=canonical><link rel=icon href=../../images/favicon.ico><meta name=generator content="mkdocs-1.1.2, mkdocs-material-7.1.5"><title>Get Data In - Lab Summary - Splunk AWS DevDay Workshop</title><link rel=stylesheet href=../../assets/stylesheets/main.bde7dde4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ef6f36e2.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CUbuntu+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Ubuntu Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css></head> <body dir=ltr data-md-color-scheme=preference data-md-color-primary data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#get-data-in-lab-summary class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Splunk AWS DevDay Workshop" class="md-header__button md-logo" aria-label="Splunk AWS DevDay Workshop" data-md-component=logo> <img src=../../images/logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Splunk AWS DevDay Workshop </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Get Data In - Lab Summary </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/signalfx/observability-workshop/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Splunk AWS DevDay Workshop" class="md-nav__button md-logo" aria-label="Splunk AWS DevDay Workshop" data-md-component=logo> <img src=../../images/logo.png alt=logo> </a> Splunk AWS DevDay Workshop </label> <div class=md-nav__source> <a href=https://github.com/signalfx/observability-workshop/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> <b>Amazon EKS</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Amazon EKS</b>" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> <b>Amazon EKS</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../eks-cluster/readme-b/ class=md-nav__link> Create EKS Cluster </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> <b>SignalFx</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>SignalFx</b>" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> <b>SignalFx</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_1 type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1> <b>Get Data In</b><br><small>20 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Get Data In</b><br /><small>20 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> <b>Get Data In</b><br><small>20 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Workshop Introduction </a> </li> <li class=md-nav__item> <a href=../k3s/ class=md-nav__link> Deploy the Smart Agent in EKS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_2 type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2> <b>Deploy Applications</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Deploy Applications</b>" data-md-level=2> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> <b>Deploy Applications</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../nginx/ class=md-nav__link> Deploy NGINX in EKS </a> </li> <li class=md-nav__item> <a href=../mario/ class=md-nav__link> Deploy Mario in EKS </a> </li> <li class=md-nav__item> <a href=../imagesample/ class=md-nav__link> Deploy Imagesample in EKS </a> </li> <li class=md-nav__item> <a href=../hungry/ class=md-nav__link> Deploy CronJob Hungry in EKS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_3 type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3> <b>Dashboards</b><br><small>30 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Dashboards</b><br /><small>30 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> <b>Dashboards</b><br><small>30 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../dashboards/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../dashboards/editing/ class=md-nav__link> Editing charts </a> </li> <li class=md-nav__item> <a href=../../dashboards/filtering/ class=md-nav__link> Using filters </a> </li> <li class=md-nav__item> <a href=../../dashboards/formulas/ class=md-nav__link> Using formulas </a> </li> <li class=md-nav__item> <a href=../../dashboards/overlay/ class=md-nav__link> Using overlays </a> </li> <li class=md-nav__item> <a href=../../dashboards/signalflow/ class=md-nav__link> SignalFlow </a> </li> <li class=md-nav__item> <a href=../../dashboards/adding-charts/ class=md-nav__link> Adding charts </a> </li> <li class=md-nav__item> <a href=../../dashboards/datalinks/ class=md-nav__link> Integration to Splunk </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_4 type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4> <b>Detectors</b><br><small>15 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Detectors</b><br /><small>15 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> <b>Detectors</b><br><small>15 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../detectors/detectors/ class=md-nav__link> Creating a Detector </a> </li> <li class=md-nav__item> <a href=../../detectors/muting/ class=md-nav__link> Creating a Muting Rule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_5 type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5> <b>Monitoring as Code</b><br><small>10 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Monitoring as Code</b><br /><small>10 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> <b>Monitoring as Code</b><br><small>10 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../monitoring-as-code/ class=md-nav__link> Initial Setup </a> </li> <li class=md-nav__item> <a href=../../monitoring-as-code/plan-and-apply/ class=md-nav__link> Plan, Apply and Destroy </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_6 type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6> <b>Service Bureau</b><br><small>20 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Service Bureau</b><br /><small>20 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> <b>Service Bureau</b><br><small>20 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../servicebureau/billing-and-usage/ class=md-nav__link> Billing and Usage </a> </li> <li class=md-nav__item> <a href=../../servicebureau/teams/ class=md-nav__link> Teams </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> <b>Splunk Cloud</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Splunk Cloud</b>" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> <b>Splunk Cloud</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> <b>Signing up and Getting Started</b><br><small>30 minutes</small> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Signing up and Getting Started</b><br /><small>30 minutes</small>" data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> <b>Signing up and Getting Started</b><br><small>30 minutes</small> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../splunk/ class=md-nav__link> Signing Up </a> </li> <li class=md-nav__item> <a href=../../splunk/splunkindex/ class=md-nav__link> Creating Index </a> </li> <li class=md-nav__item> <a href=../../splunk/hectoken/ class=md-nav__link> Creating HEC Token </a> </li> <li class=md-nav__item> <a href=../../splunk/sck/ class=md-nav__link> Deploying Splunk Connect for Kubernetes </a> </li> <li class=md-nav__item> <a href=../../splunk/datalinks/ class=md-nav__link> Setting up Data Links for Contextual Logging </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> <b>Exercises</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Exercises</b>" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> <b>Exercises</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../splunk/solution/ class=md-nav__link> Mission Possible </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> <b>Resources</b> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="<b>Resources</b>" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> <b>Resources</b> </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../resources/ class=md-nav__link> Links </a> </li> <li class=md-nav__item> <a href=../../resources/faq/ class=md-nav__link> FAQ </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1-module-pre-requisites class=md-nav__link> 1. Module Pre-requisites </a> </li> <li class=md-nav__item> <a href=#2-download-observability-workshop class=md-nav__link> 2. Download Observability Workshop </a> </li> <li class=md-nav__item> <a href=#3-launch-instance class=md-nav__link> 3. Launch Instance </a> </li> <li class=md-nav__item> <a href=#4-about-signalfx-realms class=md-nav__link> 4. About SignalFx Realms </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=get-data-in-lab-summary>Get Data In - Lab Summary<a class=headerlink href=#get-data-in-lab-summary title="Permanent link">&para;</a></h1> <ul> <li>Download the Workshop</li> <li>Start a Multipass<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup> or AWS/EC2 instance</li> <li>Deploy the SignalFx Smart Agent<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup> in K3s</li> <li>Validate Kubernetes<sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup> K3s cluster is visible in Kubernetes Navigator</li> <li>Deploy a NGINX<sup id=fnref:4><a class=footnote-ref href=#fn:4>4</a></sup> ReplicaSet in K3s</li> <li>Validate NGNIX metrics are flowing</li> </ul> <hr> <h2 id=1-module-pre-requisites>1. Module Pre-requisites<a class=headerlink href=#1-module-pre-requisites title="Permanent link">&para;</a></h2> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Running Locally</label><div class=tabbed-content> <div class="admonition note"> <p class=admonition-title>Multipass</p> <p>Install <a href=https://multipass.run/ target=_blank>Multipass</a> for your operating system. Make sure you are using at least version <code>1.2.0</code>.</p> <p>On a Mac you can also install via <a href=https://brew.sh/ target=_blank>Homebrew</a> e.g. <code>brew cask install multipass</code></p> </div> <div class="admonition info"> <p class=admonition-title>Struggling with Multipass?</p> <p>Ask your instructor(s) for access to a pre-provisioned AWS/EC2 instance, you can then ignore the rest of this preparation lab and go straight to the next lab <a href=../../smartagent/k3s>Deploying the Smart Agent in Kubernetes (K3s)</a>.</p> </div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Running in AWS</label><div class=tabbed-content> <div class="admonition abstract"> <p class=admonition-title>AWS/EC2 Instance</p> <p>Install <a href=https://www.terraform.io/downloads.html target=_blank>Terraform</a> for your operating system. Please make sure it is version <code>0.12.18</code> or above.</p> <p>On a Mac you can also install via <a href=https://brew.sh/ target=_blank>Homebrew</a> e.g. <code>brew install terraform</code>. This will get around Mac OS Catalina security.</p> </div> </div> </div> <hr> <h2 id=2-download-observability-workshop>2. Download Observability Workshop<a class=headerlink href=#2-download-observability-workshop title="Permanent link">&para;</a></h2> <p>Regardless if you are running this lab locally or if you are going to create your own AWS/EC2 Instance you need to download the Observability Workshop zip file locally, unzip the file, rename it and <code>cd</code> into the directory.</p> <div class=tabbed-set data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Linux/Mac OS</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nv>WSVERSION</span><span class=o>=</span><span class=m>1</span>.33
mkdir cloud-init
curl -s <span class=se>\</span>
https://raw.githubusercontent.com/signalfx/observability-workshop/v<span class=nv>$WSVERSION</span>/cloud-init/k3s.yaml <span class=se>\</span>
-o cloud-init/k3s.yaml
<span class=nb>export</span> <span class=nv>INSTANCE</span><span class=o>=</span><span class=k>$(</span>cat /dev/urandom <span class=p>|</span> base64 <span class=p>|</span> tr -dc <span class=s1>&#39;a-z&#39;</span> <span class=p>|</span> head -c4<span class=k>)</span>
</code></pre></div> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>Windows</label><div class=tabbed-content> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Download the zip by clicking on the following URL <a href=https://github.com/signalfx/observability-workshop/archive/v1.33.zip>https://github.com/signalfx/observability-workshop/archive/v1.33.zip</a>.</p> <p>Once downloaded, unzip the the file and rename it to <code>workshop</code>. Then, from the command prompt change into that directory and run</p> </div> <div class=highlight><pre><span></span><code>$INSTANCE = (&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;.tochararray() | sort {Get-Random})[0..3] -join &#39;&#39;
</code></pre></div> </div> </div> <p>If you are using your own AWS/EC2 instance please skip to <a href=../../smartagent/prep/#3-launch-instance>3. Launch Instance</a> section and select the <strong>Launch AWS/EC2 instance</strong> tab</p> <hr> <h2 id=3-launch-instance>3. Launch Instance<a class=headerlink href=#3-launch-instance title="Permanent link">&para;</a></h2> <div class=tabbed-set data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>Launch Multipass instance</label><div class=tabbed-content> <p>In this section you will build and launch the Multipass instance which will run the Kubernetes (K3s) environment that you will use in multiple labs.</p> <p>For <a href=../../apm/ >µAPM</a> module we use the Hot R.O.D<sup id=fnref:5><a class=footnote-ref href=#fn:5>5</a></sup> application to emit Traces/Spans for SignalFx µAPM. Launch your instance with:</p> <div class=highlight><pre><span></span><code>multipass launch <span class=se>\</span>
--name <span class=si>${</span><span class=nv>INSTANCE</span><span class=si>}</span> <span class=se>\</span>
--cloud-init cloud-init/k3s.yaml
</code></pre></div> <p>Once the instance has been successfully created (this can take several minutes), shell into it.</p> <div class=tabbed-set data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>multipass shell <span class=si>${</span><span class=nv>INSTANCE</span><span class=si>}</span>
</code></pre></div> </div> <input id=__tabbed_4_2 name=__tabbed_4 type=radio><label for=__tabbed_4_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>███████╗██████╗ ██╗     ██╗   ██╗███╗   ██╗██╗  ██╗    ██╗  
██╔════╝██╔══██╗██║     ██║   ██║████╗  ██║██║ ██╔╝    ╚██╗ 
███████╗██████╔╝██║     ██║   ██║██╔██╗ ██║█████╔╝      ╚██╗
╚════██║██╔═══╝ ██║     ██║   ██║██║╚██╗██║██╔═██╗      ██╔╝
███████║██║     ███████╗╚██████╔╝██║ ╚████║██║  ██╗    ██╔╝ 
╚══════╝╚═╝     ╚══════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝  ╚═╝    ╚═╝  

To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details

Waiting for cloud-init status...
Your instance is ready!

ubuntu@vmpe-k3s:~$
</code></pre></div> </div> </div> <p>Once your instance presents you with the Splunk logo, you have completed the preparation for your Multipass instance and can go directly to the next lab <a href=../../smartagent/k3s>Deploy the Smart Agent in K3s</a>.</p> </div> <input id=__tabbed_3_2 name=__tabbed_3 type=radio><label for=__tabbed_3_2>Launch AWS/EC2 instance</label><div class=tabbed-content> <p>In this section you will use terraform to build an AWS/EC2 instance in your favorite AWS region and will automatically deploy the Kubernetes (K3s) environment that you will use in this Workshop.</p> <div class="admonition important"> <p class=admonition-title>AWS Access Keys</p> <p>You will need access to an AWS account to obtain both <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code>.</p> </div> <div class="admonition warning"> <p class=admonition-title>Minimum requirements</p> <p>For the <a href=../../apm/ >µAPM</a> module we are using the Hot R.O.D. application. The minimum requirements are:</p> <p><strong>Hot R.O.D AWS/EC2 Instance min. requirements:</strong> <em>t2.micro</em> 1 vCPU, 8Gb Disk, 1Gb Memory</p> </div> <p><strong>Prepare Terraform</strong></p> <p>The first step is to go into the sub-directory where the Terraform files are located and initialise Terraform and upgrade the AWS Terraform Provider.</p> <div class=tabbed-set data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><label for=__tabbed_5_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>cd</span> ec2
terraform init -upgrade
</code></pre></div> </div> <input id=__tabbed_5_2 name=__tabbed_5 type=radio><label for=__tabbed_5_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>~/workshop/ec2$ terraform init -upgrade
Initializing the backend...

Initializing provider plugins...
- Checking for available provider plugins...
- Downloading plugin for provider &quot;aws&quot; (hashicorp/aws) 2.60.0...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = &quot;...&quot; constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.aws: version = &quot;~&gt; 2.60&quot;

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
</code></pre></div> </div> </div> <hr> <p><strong>Create AWS/EC2 Instance</strong></p> <p>Creating the AWS/EC2 instance is done in two steps, a planning phase and an apply phase.</p> <ul> <li>The planning phase will validate the Terraform scripts and check what changes it will make to your AWS environment.</li> <li>The apply phase will actually create the instance.</li> </ul> <p>First, you need to create environment variables for your AWS access keys.</p> <div class=tabbed-set data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><label for=__tabbed_6_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>AWS_ACCESS_KEY_ID</span><span class=o>=</span><span class=s2>&quot;<mark class=critic>YOUR_AWS_ACCESS_KEY_ID</mark>&quot;</span>
<span class=nb>export</span> <span class=nv>AWS_SECRET_ACCESS_KEY</span><span class=o>=</span><span class=s2>&quot;<mark class=critic>YOUR_AWS_SECRET_ACCESS_KEY</mark>&quot;</span>
<span class=nb>echo</span> <span class=nv>$AWS_ACCESS_KEY_ID</span> <span class=nv>$AWS_SECRET_ACCESS_KEY</span>
</code></pre></div> </div> <input id=__tabbed_6_2 name=__tabbed_6 type=radio><label for=__tabbed_6_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>ID: Axxxxxxxxxxxxxxxxy, KEY: Axxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxb
</code></pre></div> </div> </div> <p>Once you have confirmed that you have set you <code>AWS_SECRET_ACCESS_KEY_ID</code> &amp; <code>AWS_SECRET_ACCESS_KEY</code> correctly, you can start with the planning phase.</p> <div class="admonition important required input for terraform"> <p class=admonition-title>Important</p> <p><strong>Desired AWS Region</strong>: (Any AWS region by name, for example <strong>us-west-2</strong>)</p> <p>Please remember these values as you will need them again for the planning phase and when you use Terraform to destroy your AWS/EC2 instance.</p> </div> <p>As we only wish to provide the input once, we are going to capture the output in a <code>.out</code> file that we can use for the apply step. Please provide your initials for the output file as indicated.</p> <div class=tabbed-set data-tabs=7:1><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><label for=__tabbed_7_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>terraform plan -var<span class=o>=</span><span class=s2>&quot;aws_instance_count=1&quot;</span> -var<span class=o>=</span><span class=s2>&quot;instance_type=1&quot;</span> -out<span class=o>=</span>observability-plan.out
</code></pre></div> </div> </div> <p>Enter your desired AWS Region where you wish to run the AWS/EC2 instance e.g. <strong>us-west-2</strong></p> <div class=tabbed-set data-tabs=8:2><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><label for=__tabbed_8_1>Example</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>var.aws_region
Provide the desired region

<span class=hll>Enter a value: us-west-2
</span></code></pre></div> </div> <input id=__tabbed_8_2 name=__tabbed_8 type=radio><label for=__tabbed_8_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

data.aws_ami.latest-ubuntu: Refreshing state...

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
+ create

Terraform will perform the following actions:

**(BIG WALL OF AWS RELATED TEXT REMOVED)**

Plan: 2 to add, 0 to change, 0 to destroy.

------------------------------------------------------------------------

This plan was saved to: observability-plan.out

To perform exactly these actions, run the following command to apply:
terraform apply &quot;observability-plan.out&quot;
</code></pre></div> </div> </div> <p>If there are no errors in the output and terraform has created your output file, you can start the apply phase of Terraform. This will create the AWS/EC2 instance.</p> <div class=tabbed-set data-tabs=9:2><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><label for=__tabbed_9_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>terraform apply <span class=s2>&quot;observability-plan.out&quot;</span>
</code></pre></div> </div> <input id=__tabbed_9_2 name=__tabbed_9 type=radio><label for=__tabbed_9_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>ws_security_group.instance: Creating...
aws_security_group.instance: Creation complete after 2s [id=sg-0459afecae5953b51]
aws_instance.observability-instance[0]: Creating...
aws_instance.observability-instance[0]: Still creating... [10s elapsed]
aws_instance.observability-instance[0]: Still creating... [20s elapsed]
aws_instance.observability-instance[0]: Creation complete after 23s [id=i-095a12cd39f8e2283]

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.

The state of your infrastructure has been saved to the path
below. This state is required to modify and destroy your
infrastructure, so keep it safe. To inspect the complete state
use the `terraform show` command.

State path: terraform.tfstate

Outputs:

ip = [
&quot;YOUR IP ADDRESS&quot;,
] 
</code></pre></div> </div> </div> <p>Verify there are no errors and copy the ip address that you see in the green output.</p> <hr> <p><strong>SSH into AWS/EC2 Instance</strong></p> <p>Once the instance has been successfully created (this can take several minutes), ssh into it. In most cases your ssh client will ask you to verify the connection.</p> <div class=tabbed-set data-tabs=10:2><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><label for=__tabbed_10_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>ssh ubuntu@YOUR IP ADDRESS
</span></code></pre></div> </div> <input id=__tabbed_10_2 name=__tabbed_10 type=radio><label for=__tabbed_10_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>The authenticity of host &#39;YOUR IP ADDRESS (YOUR IP ADDRESS)&#39; can&#39;t be established.
ECDSA key fingerprint is SHA256:XdqN55g0z/ER660PARM+mGqtpYpwM3333YS9Ac8Y9hLY.
Are you sure you want to continue connecting (yes/no/[fingerprint])?
</code></pre></div> </div> </div> <p>Please confirm that you wish to continue by replying to the prompt with <code>yes</code></p> <div class=tabbed-set data-tabs=11:2><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><label for=__tabbed_11_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>Are you sure you want to <span class=k>continue</span> connecting <span class=o>(</span>yes/no/<span class=o>[</span>fingerprint<span class=o>])</span>? yes
</span></code></pre></div> </div> <input id=__tabbed_11_2 name=__tabbed_11 type=radio><label for=__tabbed_11_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>Warning: Permanently added &#39;YOUR IP ADDRESS&#39; (ECDSA) to the list of known hosts.

ubuntu@YOUR IP ADDRESS&#39;s password:
</code></pre></div> </div> </div> <p>To login to your instance please use the password provided by the Workshop host.</p> <div class=tabbed-set data-tabs=12:2><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><label for=__tabbed_12_1>Shell Command</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=hll>ubuntu@YOUR IP ADDRESS<span class=err>&#39;</span>s password: PASSWORD
</span></code></pre></div> </div> <input id=__tabbed_12_2 name=__tabbed_12 type=radio><label for=__tabbed_12_2>Output</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>███████╗██████╗ ██╗     ██╗   ██╗███╗   ██╗██╗  ██╗    ██╗  
██╔════╝██╔══██╗██║     ██║   ██║████╗  ██║██║ ██╔╝    ╚██╗ 
███████╗██████╔╝██║     ██║   ██║██╔██╗ ██║█████╔╝      ╚██╗
╚════██║██╔═══╝ ██║     ██║   ██║██║╚██╗██║██╔═██╗      ██╔╝
███████║██║     ███████╗╚██████╔╝██║ ╚████║██║  ██╗    ██╔╝ 
╚══════╝╚═╝     ╚══════╝ ╚═════╝ ╚═╝  ╚═══╝╚═╝  ╚═╝    ╚═╝  

To run a command as administrator (user &quot;root&quot;), use &quot;sudo &lt;command&gt;&quot;.
See &quot;man sudo_root&quot; for details


Waiting for cloud-init status...
Your instance is ready!

ubuntu@ip-172-31-41-196:~$
</code></pre></div> </div> </div> <p>Once your instance presents you with the Splunk logo, make sure you see <code>Your instance is ready!</code> in the output.</p> <p>You have now completed the preparation for your AWS/EC2 instance and can go directly to the next lab <a href=../../smartagent/k3s>Deploy the Smart Agent in K3s</a>.</p> </div> </div> <h2 id=4-about-signalfx-realms>4. About SignalFx Realms<a class=headerlink href=#4-about-signalfx-realms title="Permanent link">&para;</a></h2> <p>A realm is a self-contained deployment of SignalFx in which your organization is hosted. Different realms have different API endpoints (e.g. the endpoint for sending data is <code>ingest.us1.signalfx.com</code> for the <strong><code>us1</code></strong> realm, and <code>ingest.eu0.signalfx.com</code> for the <strong><code>eu0</code></strong> realm).</p> <p>Various instructions in this Workshop include a <mark class=critic>REALM</mark> placeholder that will need to be replaced with the actual name of your realm.</p> <p>This realm name is shown on your profile page in SignalFx. If you do not include the realm name when specifying an endpoint, SignalFx will interpret it as pointing to the <strong><code>us0</code></strong> realm.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>Multipass is a lightweight VM manager for Linux, Windows and macOS. It's designed for developers who want a fresh Ubuntu environment with a single command. It uses KVM on Linux, Hyper-V on Windows and HyperKit on macOS to run the VM with minimal overhead. It can also use VirtualBox on Windows and macOS. Multipass will fetch images for you and keep them up to date.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p>The SignalFx Smart Agent gathers host performance, application, and service-level metrics from both containerized and non-container environments. The Smart Agent installs with more than 100 bundled monitors for gathering data, including Python-based plug-ins such as Mongo, Redis, and Docker.&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p><a href=https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/ target=_blank>What is Kubernetes?</a>&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> <li id=fn:4> <p><a href=https://www.nginx.com/resources/glossary/nginx/ target=_blank>What is NGINX?</a>&#160;<a class=footnote-backref href=#fnref:4 title="Jump back to footnote 4 in the text">&#8617;</a></p> </li> <li id=fn:5> <p><a href=https://github.com/jaegertracing/jaeger/tree/master/examples/hotrod target=_blank>What is Hot R.O.D.?</a>&#160;<a class=footnote-backref href=#fnref:5 title="Jump back to footnote 5 in the text">&#8617;</a></p> </li> </ol> </div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">July 26, 2020 11:36:15</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Splunk Inc. All rights reserved. </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/signalfx/observability-workshop target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/splunk target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://www.linkedin.com/company/splunk/ target=_blank rel=noopener title=www.linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["tabs"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.a1609d9a.min.js></script> <script src=../../javascripts/extra.js></script> </body> </html>